name: deploy
run-name: ðŸš€ ${{ github.actor }} is deploying ${{ inputs.environment }}
on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Deploy environment'
        default: 'test'
        type: environment
        required: true
  push:
    branches:  [ main ]

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}-${{ github.sha }}
  cancel-in-progress: true

permissions:
  id-token: write
  contents: read

jobs:
  build:
    uses: ./.github/workflows/rwf_build.yml
    with:
      artifact-name: my-cool-app
      artifact-version:
      environment: ''
    secrets: inherit

  deploy:
    uses: ./.github/workflows/rwf_deploy.yml
    with:
      environment: 'test'
      version: ''

    secrets: inherit



